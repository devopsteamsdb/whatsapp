<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsappAPI - Settings</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="/js/theme.js"></script>
</head>

<body>
    <div class="app-layout">
        <!-- Navigation Bar -->
        <nav class="nav-bar">
            <a href="/" class="nav-item" title="Status/QR">
                <i class="fas fa-qrcode"></i>
            </a>
            <a href="/chats.html" class="nav-item" title="Chats">
                <i class="fas fa-comment-alt"></i>
            </a>
            <a href="/reports.html" class="nav-item" title="Daily Reports">
                <i class="fas fa-file-alt"></i>
            </a>
            <a href="/settings.html" class="nav-item active" title="Settings">
                <i class="fas fa-cog"></i>
            </a>
            <a href="/health.html" class="nav-item" title="Health">
                <i class="fas fa-heartbeat"></i>
            </a>
            <div class="nav-item" title="Profile">
                <div class="user-avatar"
                    style="width: 24px; height: 24px; background: rgba(255,255,255,0.2); border-radius: 50%;"></div>
            </div>
        </nav>

        <div class="main-viewport">
            <div class="container">
                <!-- Header -->
                <header class="header">
                    <div class="logo">
                        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M16 0C7.163 0 0 7.163 0 16c0 2.825.734 5.48 2.02 7.784L0 32l8.416-2.02A15.923 15.923 0 0016 32c8.837 0 16-7.163 16-16S24.837 0 16 0z"
                                fill="#25D366" />
                            <path
                                d="M25.6 22.4c-.8 2.267-4 4.134-6.534 4.667-1.466.267-3.2.4-9.333-2-7.2-2.8-11.867-10.133-12.267-10.667-.4-.533-3.2-4.267-3.2-8.133 0-3.867 2-5.734 2.8-6.534.667-.666 1.734-1.066 2.8-1.066.267 0 .533.133.8.133.8 0 1.2.134 1.733 1.334.667 1.466 2.267 5.466 2.4 5.866.134.4.267.934 0 1.467-.266.667-.533 1.067-.933 1.6-.4.534-.8.934-1.2 1.467-.4.4-.8.933-.267 1.733.534.8 2.267 3.734 4.934 6.134 3.466 3.066 6.266 4 7.2 4.533.8.4 1.6.267 2.133-.4.667-.8 1.467-2.133 2.267-3.466.533-.8 1.2-.934 2-.534.8.4 5.066 2.4 5.866 2.8.8.4 1.334.667 1.6 1.067.267.533.267 2-.533 4.133z"
                                fill="#fff" />
                        </svg>
                        <h1>Settings</h1>
                    </div>
                </header>

                <main class="main-content" style="grid-template-columns: 1fr;">
                    <div class="card">
                        <div class="card-header">
                            <h2>Configuration Dashboard</h2>
                            <p class="card-subtitle">Manage your server, AI, and integration settings</p>
                        </div>
                        <div class="card-body">
                            <div
                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 3rem;">
                                <!-- Left Column: Server & UI -->
                                <div>
                                    <h3 style="margin-bottom: 1.5rem; color: var(--accent-primary);">Server & UI</h3>

                                    <div class="toggle-item"
                                        style="margin-bottom: 2rem; background: rgba(255,255,255,0.03); padding: 1rem; border-radius: 8px;">
                                        <label class="toggle-label">
                                            <span>Dark Mode</span>
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="settingDarkMode">
                                                <span class="toggle-slider"></span>
                                            </div>
                                        </label>
                                    </div>

                                    <div class="form-group">
                                        <label for="settingPort">Server Port</label>
                                        <input type="number" id="settingPort" class="form-input" placeholder="3000">
                                        <span class="form-hint">Requires server restart</span>
                                    </div>

                                    <div class="form-group">
                                        <label for="settingSession">Session Path</label>
                                        <input type="text" id="settingSession" class="form-input"
                                            placeholder="./.wwebjs_auth">
                                        <span class="form-hint">Directory for WhatsApp session data</span>
                                    </div>

                                    <div class="form-group">
                                        <label for="settingWebhook">Webhook URL</label>
                                        <input type="url" id="settingWebhook" class="form-input"
                                            placeholder="https://api.example.com/webhook">
                                        <span class="form-hint">Incoming messages will be POSTed here</span>
                                    </div>
                                </div>

                                <!-- Right Column: AI Integration -->
                                <div>
                                    <h3 style="margin-bottom: 1.5rem; color: var(--accent-primary);">Gemini AI
                                        Integration</h3>

                                    <div class="form-group">
                                        <label for="settingGeminiApiKey">Gemini API Key</label>
                                        <input type="password" id="settingGeminiApiKey" class="form-input"
                                            placeholder="Enter your API Key">
                                        <span class="form-hint">Get it from <a href="https://aistudio.google.com/"
                                                target="_blank" style="color: var(--accent-primary);">Google AI
                                                Studio</a></span>
                                    </div>

                                    <div class="form-group">
                                        <label for="settingGeminiModel">AI Model</label>
                                        <select id="settingGeminiModel" class="form-input" style="height: auto;">
                                            <option value="gemini-1.5-flash">gemini-1.5-flash (Standard)</option>
                                            <option value="gemini-2.0-flash">gemini-2.0-flash (Recommended)</option>
                                            <option value="gemini-2.0-flash-lite">gemini-2.0-flash-lite (Fast)</option>
                                            <option value="gemini-2.5-flash-lite">gemini-2.5-flash-lite (Ultra Lite)
                                            </option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label for="settingReportPrompt">Daily Report Prompt</label>
                                        <textarea id="settingReportPrompt" class="form-textarea" rows="4"
                                            placeholder="Summarize conversations..."></textarea>
                                        <span class="form-hint">Supports Hebrew and English</span>
                                    </div>
                                </div>
                            </div>

                            <div
                                style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid var(--border-color); display: flex; justify-content: flex-end; align-items: center; gap: 20px;">
                                <div id="statusMessage" style="display: none;"></div>
                                <button onclick="saveSettings()" id="saveBtn" class="btn btn-primary"
                                    style="padding: 1rem 3rem;">
                                    <i class="fas fa-save"></i> Save Settings
                                </button>
                            </div>
                        </div>
                    </div>
                </main>

                <!-- Footer -->
                <footer class="footer">
                    <p>WhatsappAPI - System Settings</p>
                </footer>
            </div>
        </div>
    </div>

    <script src="js/settings.js"></script>
</body>

</html>